<div *ngIf="cameraLoaded; else loadingScreen" class="bg-gray-200 p-8">
    <div class="mb-4">
        Web camera status: {{ status }}
        <button></button>
    </div>

    <div *ngIf="stream" class="mb-8">
        <webcam [trigger]="$trigger" (imageCapture)="snapshot($event)" ></webcam>
        <div class="flex flex-row justify-between px-4 pt-4 ">
            <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" (click)="captureImage()">{{ btnLabel }}</button>
            <button class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded justify-end" (click)="ofCam()">Turn off camera</button>
        </div>
    </div>

    <div class="mb-8">
        <img [src]="previewImage" class="rounded-3xl">
    </div>



    
    <div *ngIf="showImage" class="mb-8 flex flex-row justify-around">
        <button class="bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded" (click)="checkPermissions()">Retry</button>
        <button [disabled]="loading" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded" (click)="uploadImage()">
            {{ loading ? 'Submitting...' : 'Submit' }}
        </button>
    </div>
    
</div>


<ng-template #loadingScreen>
    <div class="relative flex justify-center items-center">
        <div class="absolute animate-spin rounded-full h-32 w-32 border-t-4 border-b-4 border-purple-500"></div>
        <!-- <img src="https://www.svgrepo.com/show/509001/avatar-thinking-9.sv"  class="rounded-full h-28 w-28"> -->
        <img src="https://i.gifer.com/origin/70/70a3d696b6342a303d0c054e9c236435_w200.webp"  class="rounded-full h-28 w-28">
    </div>
</ng-template>
